# Default values for todo-app
global:
  environment: dev
  imageRegistry: ""
  imagePullSecrets: []

namespace:
  create: true
  name: todo-app

userService:
  enabled: true
  replicaCount: 2
  image:
    repository: user-service
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8001
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  healthCheck:
    enabled: true
    path: "/health"

todoService:
  enabled: true
  replicaCount: 2
  image:
    repository: todo-service
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8002
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  healthCheck:
    enabled: true
    path: "/health"

frontend:
  enabled: true
  replicaCount: 2
  image:
    repository: frontend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3000
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "200m"

ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
  hosts:
    - frontendPath: /()(.*)
      userServicePath: /api/users(/|$)(.*)
      todoServicePath: /api/todos(/|$)(.*)
      pathType: ImplementationSpecific

secrets:
  secretKey: "production-secret-key-change-this"

# Environment-specific overrides
environments:
  dev:
    replicaCount: 1
    resources:
      requests:
        memory: "64Mi"
        cpu: "50m"
      limits:
        memory: "128Mi"
        cpu: "100m"

  staging:
    replicaCount: 2

  prod:
    replicaCount: 3
    resources:
      requests:
        memory: "256Mi"
        cpu: "200m"
      limits:
        memory: "512Mi"
        cpu: "400m"
